/* ============================================
   Drag & Drop & Chain Styles
   ============================================ */

/* Drag and Drop styles */
.change-item.draggable {
	cursor: grab;
}

.change-item.draggable:active {
	cursor: grabbing;
}

.drag-handle {
	display: flex;
	align-items: center;
	padding: 0 4px;
	color: var(--vscode-descriptionForeground);
	cursor: grab;
	opacity: 0.5;
	transition:
		opacity var(--batch-transition-fast),
		color var(--batch-transition-fast);
}

.drag-handle:active {
	cursor: grabbing;
}

.change-item:hover .drag-handle {
	opacity: 1;
	color: var(--vscode-foreground);
}

.change-list.drag-over {
	border: 2px dashed var(--vscode-focusBorder);
	background-color: var(--vscode-list-hoverBackground);
	background: linear-gradient(
		180deg,
		color-mix(in srgb, var(--vscode-focusBorder) 10%, transparent) 0%,
		transparent 100%
	);
	box-shadow: 0 0 16px
		color-mix(in srgb, var(--vscode-focusBorder) 20%, transparent);
}

.change-list.drag-over .empty-message.drop-hint {
	color: var(--vscode-focusBorder);
	font-weight: 500;
}

.change-item:has(.dragging) {
	opacity: 0.5;
}

/* Drop indicators for reordering */
.change-item.drop-indicator-before {
	position: relative;
}

.change-item.drop-indicator-before::before {
	content: '';
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	height: 3px;
	background-color: var(--vscode-focusBorder);
	z-index: 10;
}

.change-item.drop-indicator-after {
	position: relative;
}

.change-item.drop-indicator-after::after {
	content: '';
	position: absolute;
	bottom: 0;
	left: 0;
	right: 0;
	height: 3px;
	background-color: var(--vscode-focusBorder);
	z-index: 10;
}

/* Chain badge */
.chain-badge {
	display: inline-flex;
	align-items: center;
	margin-left: 6px;
	color: var(--vscode-editor-foreground);
	opacity: 0.7;
}

.chain-badge .codicon-link {
	font-size: 14px;
}

.chain-badge .chain-position {
	font-size: 10px;
	margin-left: 2px;
	opacity: 0.8;
}

.chain-badge .chain-id {
	font-size: 10px;
	margin-left: 3px;
	font-family: var(--vscode-editor-font-family), monospace;
	opacity: 0.9;
	background: rgba(255, 255, 255, 0.1);
	padding: 1px 4px;
	border-radius: 3px;
}

/* Clickable chain badge */
.chain-badge.clickable {
	cursor: pointer;
	transition: all 0.15s ease;
}

.chain-badge.clickable:hover {
	opacity: 1;
	background: rgba(255, 255, 255, 0.1);
	border-radius: 4px;
	padding: 2px 4px;
	margin-left: 4px;
}

.chain-badge.clickable:active {
	transform: scale(0.95);
}

/* Chain warning badge */
.chain-badge.chain-warning-badge {
	color: #ff5722;
	animation: badgeWarning 1.5s ease-in-out infinite;
}

@keyframes badgeWarning {
	0%,
	100% {
		opacity: 1;
	}
	50% {
		opacity: 0.6;
	}
}

/* Chain warning glow - for items with unsubmitted dependencies */
.change-item.chain-warning-glow {
	border-left: 3px solid #ff5722 !important;
	box-shadow: inset 4px 0 12px -4px rgba(255, 87, 34, 0.4);
	animation: chainWarningGlow 2s ease-in-out infinite;
}

@keyframes chainWarningGlow {
	0%,
	100% {
		box-shadow: inset 4px 0 12px -4px rgba(255, 87, 34, 0.4);
	}
	50% {
		box-shadow: inset 4px 0 16px -2px rgba(255, 87, 34, 0.6);
	}
}

/* Chain warnings section */
.chain-warnings {
	display: flex;
	flex-direction: column;
	gap: 8px;
	margin-top: 12px;
	padding: 0 4px;
}

.chain-warning-item {
	display: flex;
	align-items: center;
	gap: 8px;
	padding: 10px 14px;
	background: linear-gradient(
		135deg,
		rgba(255, 152, 0, 0.15) 0%,
		rgba(255, 87, 34, 0.1) 100%
	);
	border: 1px solid rgba(255, 152, 0, 0.4);
	border-radius: 6px;
	font-size: 13px;
	color: #ffa726;
}

.chain-warning-item .codicon {
	font-size: 16px;
	flex-shrink: 0;
}
